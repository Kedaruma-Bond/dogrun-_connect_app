<% content_for(:title, t('.dogrun')) %>
<div class='max-w-5xl mx-3 md:mx-auto pt-2 pb-2 sm:mx-32 text-center bg-purple-200 rounded-lg'
  data-controller="filming-message-modal sns-post-message-modal"
  >
  <% if logged_in? %>
    <% if !@publishing_post.blank? %>
      <div class="mx-auto mt-1 w-full sm:w-2/3 md:w-1/2 xl:w-1/3 py-2 rounded-xl border-2 border-neutral-400
        bg-[url('https://res.cloudinary.com/hryerpkcw/image/upload/f_auto,g_center,q_auto/v1671380081/w4ygbtfdkxu3gzrixk6u.jpg')]
      ">
        <div class="flex justify-center">
          <h3 class="text-white font-bold text-lg self-center"><%= t('.dogrun_board') %></h3>
          <%= link_to('javascript:void(0);', onclick: "window.location.reload();", 
              class: "items-center px-2 py-2 font-medium tracking-wide text-slate-500 capitalize transition-colors duration-300 transform rounded-md hover:text-slate-700 focus:outline-none") do %>
            <svg class="w-5 h-5 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
            </svg>
          <% end %>
        </div>
        <%= @publishing_post[0].post_viewing %>
      </div>
    <% end %>
    <% if @dogrun_place.name == "犬のしつけ広場" %> 
      <h1 class="my-1">
        <%= simple_format(t('.under_commissioning'), class: "font-bold text-lg text-red-600") %>
      </h1>
    <% end %>
    <div class="w-full sm:px-10 pt-1 sm:pb-0">
      <div class="flex flex-col mt-1 font-bold">
        <p class='text-center text-gray-700 text-2xl relative right-10'>
          <%= t'.site_in' %>
        </p>
        <div class="text-2xl flex text-center mt-4 mx-auto relative left-12">
          <h1 class="flex text-6xl pb-2 text-gray-700">
            <%= @num_of_playing_dogs %>
          </h1>
          <span class="ml-10 text-left">
            <%= simple_format(t('.playing1'), class:"text-gray-700") %>
            <%= simple_format(t('.playing2'), class:"text-gray-700") %>
          </span>
        </div>
        <% if @num_of_playing_dogs.zero? %>
          <p class="text-center text-base font-medium text-orange-500 mt-2 sm:mb-6">
            <%= t'.nobody_playing' %>
          </p>
        <% end %>
        <% if !@dogs_non_public.blank? %>
          <div class="flex justify-center">
              <%= simple_format(t('.among_them_non_public_dogs'), class: "text-left text-base font-medium text-stone-500 mt-2") %>
            <p class="ml-3 text-base font-medium text-stone-500 mt-2 self-end">
              <%= @dogs_non_public.size %>
              <%= t('.unit_of_dogs') %>
            </p>
          </div>
        <% end %>
      </div>
      <%= render 'togo_inu_shitsuke_hiroba/static_pages/login_top_content' %>
      <% if !@pre_entry_dogs_public_view.blank? %>
        <%= render 'during_pre_entry_dogs_content' %>
      <% end %>
      <% if !@dogs_public_view.blank? %>
        <%= render 'during_entry_dogs_content' %>
      <% end %>
    </div>

    <% if current_user.guest? %>
      <div class="inline-flex overflow-hidden rounded-lg shadow mt-2 sm:w-auto sm:mx-3 animate-heartbeat">
        <%= button_to togo_inu_shitsuke_hiroba_jump_to_signup_path, method: :post,
            class: "inline-flex items-center justify-center w-full px-5 py-3 text-base font-medium text-gray-200 bg-gradient-to-r from-emerald-400 to-emerald-600 hover:from-blue-600 hover:to-blue-600 sm:w-auto" do %>
          <svg class="w-7 h-7 inline-block" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path>
          </svg>
          <span class="mx-2">
            <%= t'.jump_to_signup' %>
          </span>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <div class="w-1/2 md:w-1/3 lg:1/4 h-auto mx-auto mt-3">
      <%= dogrun_logo(@dogrun_place) %>
    </div>
    <%= link_to 'https://www.town.aichi-togo.lg.jp/soshikikarasagasu/toshiseibika/gyomuannai/2/1/3279.html' do %>
      <p class="mt-10 text-2xl text-center font-semibold text-blue-500 underline transform hover:scale-110 hover:text-blue-400 duration-500">
        <%= t'.before_using_dogrun' %>
      </p>
    <% end %>
    <div class="flex-col">
      <%= link_to  togo_inu_shitsuke_hiroba_login_path do %>
        <button class="mx-auto flex px-6 py-2 text-2xl mt-10 text-white bg-emerald-500 transform hover:scale-110 hover:bg-emerald-400 duration-500 focus:outline-none focus:shadow-outline rounded-full focus:ring focus:ring-blue-300 focus:ring-opacity-80">
          <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd"></path>
          </svg>
          &nbsp;
          <%= t'defaults.login' %>
        </button>
      <% end %>
      <%= link_to togo_inu_shitsuke_hiroba_signup_path do %>
        <button class="mx-auto flex px-6 py-2 text-2xl mt-5 text-white bg-blue-500 transform hover:scale-110 hover:bg-blue-400 duration-500 focus:outline-none focus:shadow-outline rounded-full focus:ring focus:ring-blue-300 focus:ring-opacity-80">
          <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path>
          </svg>
          &nbsp;
          <%= t'.signup' %>
        </button>
      <% end %>
      <%= button_to togo_inu_shitsuke_hiroba_guest_login_path, method: :post,
          class: "mx-auto px-4 py-2 text-lg mt-7 text-indigo-500 capitalize transition-colors duration-300 transform bg-stone-300 rounded-full hover:bg-stone-100 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80" do %>
          <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="text-indigo-500 w-6 h-6 mb-1 inline-block" viewBox="0 0 24 24">
            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75"></path>
          </svg>
          <span class="mx-1"><%= t('.guest_login') %></span>
        </class:>
      <% end %>
      <p class="text-center"><%= simple_format(t('.check_app_by_trial_guest_login'), class: "text-indigo-500 text-sm") %></p>
    </div>
  <% end %>
</div>
